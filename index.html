<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì²­ì†Œë‹¹ë²ˆ ëœë¤ ì¶”ì²¨ê¸°</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-gradient-to-br from-blue-900 to-indigo-900 min-h-screen flex items-center justify-center p-4">
  <div class="bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl max-w-lg w-full p-6 border border-white/20">
    <h1 class="text-2xl font-bold text-white mb-2">í•™ê¸‰ ì²­ì†Œë‹¹ë²ˆ ëœë¤ ì¶”ì²¨</h1>
    <p class="text-blue-200 mb-4">1ë²ˆë¶€í„° 30ë²ˆ ì‚¬ì´ì—ì„œ <strong>5ëª…</strong>ì„ ì¤‘ë³µ ì—†ì´ ëœë¤ ì¶”ì²¨í•©ë‹ˆë‹¤.</p>

    <div class="flex gap-2 mb-4">
      <button id="drawBtn" class="btn btn-primary flex-1">ğŸ² ì¶”ì²¨í•˜ê¸°</button>
      <button id="resetBtn" class="btn btn-outline-light">â†º ì´ˆê¸°í™”</button>
    </div>

    <div id="results" class="flex flex-wrap gap-2 justify-center p-4 bg-black/30 rounded-lg border border-white/10 min-h-[80px] text-white"></div>

    <div class="flex items-center gap-2 mt-4">
      <button id="copyBtn" class="btn btn-outline-info">ğŸ“‹ ê²°ê³¼ ë³µì‚¬</button>
      <span id="copyMsg" class="text-sm text-blue-200"></span>
    </div>
  </div>

  <script>
    const MIN = 1;
    const MAX = 30;
    const COUNT = 5;

    const drawBtn = document.getElementById('drawBtn');
    const resetBtn = document.getElementById('resetBtn');
    const copyBtn  = document.getElementById('copyBtn');
    const results  = document.getElementById('results');
    const copyMsg  = document.getElementById('copyMsg');

    function validateConfig(min, max, count){
      if(min > max) return 'MINì€ MAXë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤.';
      if(count < 1) return 'COUNTëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.';
      if(count > (max - min + 1)) return 'COUNTê°€ ë²”ìœ„ë³´ë‹¤ í½ë‹ˆë‹¤.';
      return null;
    }

    function secureShuffle(array){
      const a = array.slice();
      for(let i = a.length - 1; i > 0; i--){
        const r = crypto.getRandomValues(new Uint32Array(1))[0] / 2**32;
        const j = Math.floor(r * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function pickUnique(min, max, count){
      const range = Array.from({length: max - min + 1}, (_,i) => i + min);
      const shuffled = secureShuffle(range);
      return shuffled.slice(0, count).sort((a,b) => a - b);
    }

    function renderChips(nums){
      results.innerHTML = '';
      nums.forEach(n => {
        const el = document.createElement('div');
        el.className = 'bg-gradient-to-br from-blue-400 to-blue-600 text-white font-bold rounded-full w-14 h-14 flex items-center justify-center shadow-lg';
        el.textContent = n;
        results.appendChild(el);
      });
    }

    function draw(){
      const err = validateConfig(MIN, MAX, COUNT);
      if(err){
        Swal.fire('ì„¤ì • ì˜¤ë¥˜', err, 'error');
        return;
      }
      const nums = pickUnique(MIN, MAX, COUNT);
      renderChips(nums);
      results.setAttribute('data-nums', nums.join(', '));
      Swal.fire('ì¶”ì²¨ ì™„ë£Œ ğŸ‰', `ë‹¹ì²¨ ë²ˆí˜¸: ${nums.join(', ')}`, 'success');
    }

    function reset(){
      results.innerHTML = '';
      results.removeAttribute('data-nums');
      copyMsg.textContent = '';
    }

    async function copyResult(){
      const text = results.getAttribute('data-nums');
      if(!text){
        Swal.fire('ì•Œë¦¼', 'ë³µì‚¬í•  ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.', 'info');
        return;
      }
      try{
        await navigator.clipboard.writeText(text);
        copyMsg.textContent = `ë³µì‚¬ë¨: [ ${text} ]`;
        Swal.fire('ë³µì‚¬ ì™„ë£Œ', `${text}`, 'success');
      }catch(e){
        Swal.fire('ì‹¤íŒ¨', 'ë³µì‚¬ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.', 'error');
      }
    }

    drawBtn.addEventListener('click', draw);
    resetBtn.addEventListener('click', reset);
    copyBtn.addEventListener('click', copyResult);

    results.innerHTML = '<span class="text-blue-200">ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¶”ì²¨ì„ ì‹œì‘í•˜ì„¸ìš” ğŸ²</span>';
  </script>
</body>
</html>
